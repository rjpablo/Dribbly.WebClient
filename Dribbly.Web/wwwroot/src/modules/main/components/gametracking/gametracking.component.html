<div drbbly-overlay="gdg.gameDetailsOverlay">
    <div class="container px-0 min-height-300">
        <div class="row my-3">
            <div class="col-12">
                <div class="text-center">
                    <a ui-sref="main.game.details(gdg.game.id)"
                       class="d-inline-block text-white">
                        <h5 class="text-white">{{gdg.game.title}}</h5>
                    </a>
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-12">
                <div class="score-board">
                    <div class="row">
                        <div class="col-3 text-white text-center">
                            <div class="p-3">
                                <img class="logo" ng-src="{{gdg.game.team1.logo.url}}" />
                                <a ui-sref="main.team.home({id: gdg.game.team1.id})"
                                   target="_blank">
                                    <h5 class="text-white m-0 d-inline-block">
                                        {{gdg.game.team1.isOpen? '(' + ('app.OpenTeam' | i18n) + ')' :gdg.game.team1.name}}
                                    </h5>
                                </a>
                            </div>
                            <div class="py-2">
                                <h1 class="text-center text-white score"
                                    ng-class="{'text-secondary': gdg.game.winningTeamId !== null && gdg.game.winningTeamId !== gdg.game.team1.id}">
                                    {{gdg.game.team1Score || 0}}
                                </h1>
                            </div>
                        </div>
                        <div class="col-6 p-3 text-center text-white">
                            <div class="mb-3">
                                <div ng-if="gdg.game.status !== gdg.gameStatusEnum.Finished">
                                    <!-- Game Clock -->
                                    <div class="game-clock mb-2"
                                         ng-show="gdg.game.isTimed">
                                        <drbbly-timer on-ready="gdg.onTimerReady"
                                                      toggle-on-click="true"
                                                      class="game-clock"
                                                      label="'TIME'"></drbbly-timer>
                                        <div class="controls text-center"
                                             ng-cloak>
                                            <button class="btn btn-sm"
                                                    ng-if="!gdg.timer.isOver()"
                                                    ng-click="gdg.timer.toggle()">
                                                <i class="fa text-white"
                                                   ng-class="gdg.timer.isRunning()? 'fa-pause':'fa-play'"></i>
                                            </button>
                                            <button class="btn btn-sm"
                                                    ng-disabled="gdg.timer.isRunning()"
                                                    ng-click="gdg.timer.edit()">
                                                <i class="fa fa-pencil text-white"
                                                   uib-tooltip="{{gdg.timer.isRunning()? 'Cannot edit the clock while it is running':'Edit the clock'}}"></i>
                                            </button>
                                            <button class="btn btn-sm"
                                                    uib-tooltip="Advance to next period"
                                                    ng-disabled="gdg.isBusy"
                                                    ng-click="gdg.goToNextPeriod()"
                                                    ng-if="gdg.timer.isOver()">
                                                <i class="fa fa-angle-double-right text-white"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <!-- Period -->
                                    <div class="period mb-2"
                                         ng-if="gdg.game.isTimed">
                                        <span class="d-block text-center small">PERIOD</span>
                                        <div class="border border-white d-inline-block text-center p-1 value">
                                            {{gdg._period}}
                                        </div>
                                    </div>
                                    <!-- Shot Clock -->
                                    <div class="shot-clock"
                                         ng-show="gdg.game.isTimed">
                                        <drbbly-timer on-ready="gdg.onShotTimerReady"
                                                      class="game-clock"
                                                      is-shot-clock="true"
                                                      label="'SHOT CLOCK'"></drbbly-timer>
                                        <div class="controls text-center">
                                            <button class="btn btn-sm text-white"
                                                    ng-click="gdg.shotTimer.reset()">
                                                <i class="fa fa-undo"
                                                   uib-tooltip="Reset the clock"></i>&nbsp;{{gdg.game.defaultShotClockDuration}}
                                            </button>
                                            <button class="btn btn-sm text-white"
                                                    ng-click="gdg.shotTimer.setRemainingTime(gdg.game.offensiveRebondShotClock * 1000, gdg.timer.isRunning())">
                                                <i class="fa fa-undo"
                                                   uib-tooltip="Reset the clock"></i>&nbsp;{{gdg.game.offensiveRebondShotClock}}
                                            </button>
                                            <button class="btn btn-sm"
                                                    ng-disabled="gdg.shotTimer.isRunning()"
                                                    ng-click="gdg.shotTimer.edit()">
                                                <i class="fa fa-pencil text-white"
                                                   uib-tooltip="{{gdg.shotTimer.isRunning()? 'Cannot edit the clock while it is running':'Edit the clock'}}"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="gdg.game.status === gdg.gameStatusEnum.Finished">
                                    <div class="my-3 final">FINAL</div>
                                </div>
                            </div>
                            <div class="game-options">
                                <button type="button" class="btn btn-secondary"
                                        ng-if="gdg.game.status === gdg.gameStatusEnum.WaitingToStart"
                                        ng-click="gdg.updateStatus(gdg.gameStatusEnum.Started)">
                                    Start Game
                                </button>
                                <button type="button" class="btn btn-secondary"
                                        ng-if="gdg.game.status === gdg.gameStatusEnum.Started"
                                        ng-click="gdg.endGame()">
                                    End Game
                                </button>
                                <button type="button" class="btn btn-secondary"
                                        ng-if="gdg.game.status !== gdg.gameStatusEnum.WaitingToStart"
                                        ng-click="gdg.updateStatus(gdg.gameStatusEnum.WaitingToStart)">
                                    Reset Game
                                </button>
                            </div>
                        </div>
                        <div class="col-3 text-white text-center">
                            <div class="p-3">
                                <img class="logo" ng-src="{{gdg.game.team2.logo.url}}" />
                                <a ui-sref="main.team.home({id: gdg.game.team2.id})"
                                   target="_blank">
                                    <h5 class="text-white m-0 d-inline-block">
                                        {{gdg.game.team2.isOpen? '(' + ('app.OpenTeam' | i18n) + ')' :gdg.game.team2.name}}
                                    </h5>
                                </a>
                            </div>
                            <div class="py-2">
                                <h1 class="text-center text-white score"
                                    ng-class="{'text-secondary': gdg.game.winningTeamId !== null && gdg.game.winningTeamId !== gdg.game.team2.id}">
                                    {{gdg.game.team2Score || 0}}
                                </h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row"
             ng-if="gdg.game.status !== gdg.gameStatusEnum.Finished">
            <div class="col-3 player-list">
                <table class="table table-sm table-light">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th class="w-100">Player</th>
                            <th>Pts</th>
                            <th class="d-none d-lg-table-cell">F</th>
                            <th class="d-none d-lg-table-cell">Reb</th>
                            <th class="d-none d-lg-table-cell">Ast</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="player in gdg.team1.players"
                            class="player"
                            ng-click="gdg.togglePlayerSelection(player)"
                            ng-class="{'selected': player.isSelected}">
                            <td>{{player.jerseyNo}}</td>
                            <td>{{player.name}}</td>
                            <td>{{player.points}}</td>
                            <td class="d-none d-lg-table-cell">{{player.fouls}}</td>
                            <td class="d-none d-lg-table-cell">{{player.rebounds}}</td>
                            <td class="d-none d-lg-table-cell">{{player.assists}}</td>
                        </tr>
                        <tr ng-if="gdg.team1.players.length === 0">
                            <td class="text-center" colspan="6">
                                No players found.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-6 player-options">
                <div class="selected-player bg-secondary text-white mb-3">
                    <div ng-show="gdg.selectedPlayer">
                        <table class="font-weight-bold">
                            <tr>
                                <td>
                                    <span class="jersey-no d-inline-block px-3 text-white">{{gdg.selectedPlayer.jerseyNo}}</span>
                                </td>
                                <td class="w-100">
                                    <span class="d-inline-block px-3">{{gdg.selectedPlayer.name}}</span>
                                </td>
                                <td>
                                    <button class="btn btn-secondary ml-auto"
                                            ng-click="gdg.unselectPlayer(gdg.selectedPlayer)">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="text-center p-2" ng-show="!gdg.selectedPlayer">
                        Select a player to update
                    </div>
                </div>
                <div class="options">
                    <div class="d-flex flex-column">
                        <button type="button"
                                class="btn btn-block btn-secondary"
                                ng-click="gdg.recordShot(1, false)"
                                ng-disabled="!gdg.selectedPlayer">
                            +1
                        </button>
                        <button type="button"
                                class="btn btn-block btn-secondary"
                                ng-click="gdg.recordShot(2, false)"
                                ng-disabled="!gdg.selectedPlayer">
                            +2
                        </button>
                        <button type="button"
                                class="btn btn-block btn-secondary"
                                ng-click="gdg.recordShot(3, false)"
                                ng-disabled="!gdg.selectedPlayer">
                            +3
                        </button>
                    </div>
                    <div class="flex-grow-1 flex-shrink-1 d-flex flex-column">
                        <button type="button"
                                class="btn btn-block btn-danger"
                                ng-click="gdg.recordShot(1, true)"
                                ng-disabled="!gdg.selectedPlayer">
                            miss 1
                        </button>
                        <button type="button"
                                class="btn btn-block btn-danger"
                                ng-click="gdg.recordShot(2, true)"
                                ng-disabled="!gdg.selectedPlayer">
                            miss 2
                        </button>
                        <button type="button"
                                class="btn btn-block btn-danger"
                                ng-click="gdg.recordShot(3, true)"
                                ng-disabled="!gdg.selectedPlayer">
                            miss 3
                        </button>
                    </div>
                    <div class="flex-grow-1 flex-shrink-1 d-flex flex-column">
                        <button type="button"
                                class="btn btn-block btn-secondary"
                                ng-click="gdg.recordFoul()"
                                ng-disabled="!gdg.selectedPlayer">
                            Foul
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-3 player-list">
                <table class="table table-sm table-light">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th class="w-100">Player</th>
                            <th>Pts</th>
                            <th class="d-none d-lg-table-cell">F</th>
                            <th class="d-none d-lg-table-cell">Reb</th>
                            <th class="d-none d-lg-table-cell">Ast</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="player in gdg.team2.players"
                            class="player"
                            ng-click="gdg.togglePlayerSelection(player)"
                            ng-class="{'selected': player.isSelected}">
                            <td>{{player.jerseyNo}}</td>
                            <td>{{player.name}}</td>
                            <td>{{player.points}}</td>
                            <td class="d-none d-lg-table-cell">{{player.fouls}}</td>
                            <td class="d-none d-lg-table-cell">{{player.rebounds}}</td>
                            <td class="d-none d-lg-table-cell">{{player.assists}}</td>
                        </tr>
                        <tr ng-if="gdg.team2.players.length === 0">
                            <td class="text-center" colspan="6">
                                No players found.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
